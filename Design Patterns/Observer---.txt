âœ… Observer Design Pattern in C#

ğŸ“Œ Definition
ğŸ”· The Observer Design Pattern is a behavioral pattern used to define a one-to-many dependency between objects so that when one object (called the Subject) changes its state, all its dependents (called Observers) are notified and updated automatically.
ğŸ”· It promotes loose coupling between the subject and observers.


ğŸ” Key Concepts Explained:
ğŸ”¸ 1. Behavioral Pattern
This pattern is about communication between objects.
Unlike structural patterns (which focus on object composition), behavioral patterns help objects interact efficiently and flexibly.

ğŸ”¸ 2. One-to-Many Dependency
This means one object (Subject) is being observed by many other objects (Observers).
When the Subject changes, it automatically notifies all the Observers.
Think of it like YouTube notifications:
One channel (Subject) uploads a new video
All subscribers (Observers) get notified
Thatâ€™s one-to-many: one subject, many listeners.


ğŸ”¸ 3. Subject
The object that holds the core state/data.
It manages a list of observers.
It provides:
Methods to attach (subscribe) or detach (unsubscribe) observers.
A method to notify all observers when the state changes


ğŸ”¸ 3. Subject
The object that holds the core state/data.
It manages a list of observers.
It provides:
Methods to attach (subscribe) or detach (unsubscribe) observers.
A method to notify all observers when the state changes

EG : YouTube Channel and Subscribers Code

using System;
using System.Collections.Generic;
#region Interfaces
// ğŸ“Œ IObserver Interface
// ğŸ”· Defines a method "Update" that all observers must implement.
// ğŸ”· This is how the subject communicates changes to all observers.
public interface IObserver
{
    void Update(string message); // Observer gets updated with a message
}

// ğŸ“Œ ISubject Interface
// ğŸ”· Declares methods for adding, removing, and notifying observers.
public interface ISubject
{
    void Attach(IObserver observer);   // Add a new observer
    void Detach(IObserver observer);   // Remove an observer
    void Notify(string message);       // Notify all observers
}

#endregion

#region Subject Implementation

// ğŸ“Œ ConcreteSubject: YouTubeChannel
// ğŸ”· Maintains a list of subscribers (observers).
// ğŸ”· Notifies them when a new video is uploaded.
public class YouTubeChannel : ISubject
{
    // List of subscribers (observers)
    private List<IObserver> _observers = new List<IObserver>();

    // Add a subscriber
    public void Attach(IObserver observer)
    {
        _observers.Add(observer);
        Console.WriteLine("Subscriber added.");
    }

    // Remove a subscriber
    public void Detach(IObserver observer)
    {
        _observers.Remove(observer);
        Console.WriteLine("Subscriber removed.");
    }

    // Notify all subscribers with the update message
    public void Notify(string message)
    {
        foreach (var observer in _observers)
        {
            observer.Update(message); // Each observer handles the update in its own way
        }
    }

    // Simulates uploading a new video and notifies all subscribers
    public void UploadVideo(string title)
    {
        Console.WriteLine($"\nğŸ¥ New video uploaded: {title}");
        Notify($"ğŸ“¢ New Video Notification: {title}");
    }
}

#endregion

#region Observer Implementation

// ğŸ“Œ ConcreteObserver: Subscriber
// ğŸ”· Implements the IObserver interface.
// ğŸ”· Gets notified and performs action (e.g., prints the message).
public class Subscriber : IObserver
{
    private string _name;

    // Constructor to assign subscriber's name
    public Subscriber(string name)
    {
        _name = name;
    }

    // Handles the update notification from the subject
    public void Update(string message)
    {
        Console.WriteLine($"{_name} received notification: {message}");
    }
}

#endregion

#region Client Code

// ğŸ“Œ Main Program
// ğŸ”· Demonstrates the usage of the Observer pattern.
class Program
{
    static void Main()
    {
        // Create a YouTube Channel (Subject)
        YouTubeChannel channel = new YouTubeChannel();

        // Create subscribers (Observers)
        IObserver s1 = new Subscriber("Alice");
        IObserver s2 = new Subscriber("Bob");
        IObserver s3 = new Subscriber("Charlie");

        // Attach subscribers to the channel
        channel.Attach(s1);
        channel.Attach(s2);
        channel.Attach(s3);

        // Upload a video - all attached subscribers get notified
        channel.UploadVideo("Observer Pattern Explained");

        // Remove one subscriber
        channel.Detach(s2);

        // Upload another video - remaining subscribers get notified
        channel.UploadVideo("Strategy Pattern Tutorial");

        // Output shows the notifications sent only to current subscribers
    }
}

#endregion

âœ… What is the Code About?
ğŸ”· This code demonstrates the Observer Design Pattern using a YouTube Channel and Subscribers analogy.
ğŸ”· It shows how multiple objects (subscribers) can automatically receive updates when another object (YouTube channel) changes its state (uploads a video).
ğŸ”· The implementation decouples the channel (subject) from its subscribers (observers), making it easy to add/remove subscribers dynamically.

âœ… What Have We Implemented?
ğŸ”· We created an Observer pattern where:
A YouTubeChannel (Subject) notifies all Subscriber (Observers) when a new video is uploaded.
Observers register (Attach) or unregister (Detach) from the subject.
When the state changes (video uploaded), all current observers receive a notification (Update).

âœ… Steps to Implement the Observer Pattern (in Short Theory Points)

ğŸ“Œ 1. Define Observer Interface
ğŸ”· Create IObserver with a method Update(string message)
ğŸ”· All classes that want to receive notifications must implement this interface.

ğŸ“Œ 2. Define Subject Interface
ğŸ”· Create ISubject with methods Attach(), Detach(), and Notify()
ğŸ”· This allows the subject to manage its list of observers.

ğŸ“Œ 3. Create Concrete Subject (YouTubeChannel)
ğŸ”· Implements ISubject
ğŸ”· Maintains a list of observers
ğŸ”· Notifies them via Notify() when a video is uploaded

ğŸ“Œ 4. Create Concrete Observer (Subscriber)
ğŸ”· Implements IObserver
ğŸ”· Defines how the observer responds when it receives a notification from the subject

ğŸ“Œ 5. Use the Pattern in Main Method
ğŸ”· Create subject and observer objects
ğŸ”· Attach observers to the subject
ğŸ”· Call subjectâ€™s UploadVideo() to trigger Notify() and update observers
ğŸ”· Optionally remove an observer using Detach()




âœ… How the Observer Pattern is Implemented in the Code
ğŸ“Œ Roles in the Pattern:
ğŸ”· IObserver â€“ This defines the observer contract via Update() method.
ğŸ”· Subscriber â€“ A concrete class that implements IObserver. It represents users who want to be notified.
ğŸ”· ISubject â€“ Declares methods for attaching, detaching, and notifying observers.
ğŸ”· YouTubeChannel â€“ Implements ISubject. It maintains a list of IObservers and notifies them when a video is uploaded.
ğŸ”· Program â€“ The client code that connects everything together.

âœ… Working Explanation
Observers (Subscriber objects) are registered to the Subject (YouTubeChannel) using Attach().
When UploadVideo() is called on YouTubeChannel, it calls Notify(), which loops through all attached observers and calls their Update() method.
Observers receive a message and react accordingly (e.g., print it).
Observers can be removed at any time using Detach(), and they will no longer receive updates.



ğŸ¯ Real-Life Analogy Explained
Concept	Real-Life Equivalent
Subject	News Agency or YouTube Channel
Observer	Subscribers
Attach()	Clicking the "Subscribe" button
Detach()	Clicking "Unsubscribe"
Notify()	Sending email/push notification to users
Update()	Observer receives the latest news/video


ğŸ“Œ Key Components
ğŸ”· ISubject â€“ Interface that defines methods to attach, detach and notify observers.
ğŸ”· IObserver â€“ Interface that defines the update method.
ğŸ”· ConcreteSubject â€“ Maintains state and notifies observers when its state changes.
ğŸ”· ConcreteObserver â€“ Implements the observer update method and gets notified of changes.


ğŸ§  Why Use Observer Pattern?
To ensure loose coupling between Subject and Observers:
The Subject doesn't need to know much about who is watchingâ€”it just calls notify().
Makes it easy to add/remove observers dynamically at runtime.
Useful when changes in one object should automatically reflect in others.
âœ… Benefits of Observer Pattern
ğŸ”· Promotes loose coupling between the subject and observers
ğŸ”· Supports dynamic addition/removal of observers at runtime
ğŸ”· Useful in event-driven systems


âœ… When to Use
ğŸ”· When changes to one object require automatic updates to dependent objects
ğŸ”· In scenarios like event handling, data-binding, UI frameworks, and real-time systems



           +-----------+
           |  Subject  |
           +-----------+
                 |
                 v
           +-----------+
           |  Notify   |
           +-----------+
            /    |    \
           v     v     v
    +---------+ +---------+ +---------+
    |Observer1| |Observer2| |Observer3|
    +---------+ +---------+ +---------+

----------------------------------------------------------------------------------

EG 2 :
using System;
using System.Collections.Generic;

#region Interfaces

// ğŸ“Œ IPublisher Interface
// ğŸ”· Defines the methods "Subscribe", "Unsubscribe", and "Notify" that the publisher must implement.
public interface IPublisher
{
    void Subscribe(ISubscriber subscriber);   // Register a new subscriber
    void Unsubscribe(ISubscriber subscriber); // Unregister a subscriber
    void Notify(string message);              // Notify all subscribers
}

// ğŸ“Œ ISubscriber Interface
// ğŸ”· Defines the "Update" method that all subscribers must implement.
public interface ISubscriber
{
    void Update(string message); // Method to handle the update when notified by the publisher
}

#endregion

#region Publisher Implementation

// ğŸ“Œ ConcretePublisher: YouTube
// ğŸ”· Implements IPublisher. It maintains a list of subscribers and notifies them when new content is available.
public class YouTube : IPublisher
{
    private List<ISubscriber> _subscribers = new List<ISubscriber>();  // List of subscribers

    // ğŸ“Œ Subscribe a new subscriber to the YouTube channel
    public void Subscribe(ISubscriber subscriber)
    {
        _subscribers.Add(subscriber);
        Console.WriteLine("New subscriber added.");
    }

    // ğŸ“Œ Unsubscribe an existing subscriber
    public void Unsubscribe(ISubscriber subscriber)
    {
        _subscribers.Remove(subscriber);
        Console.WriteLine("Subscriber removed.");
    }

    // ğŸ“Œ Notify all subscribed users about a new video upload
    public void Notify(string message)
    {
        foreach (var subscriber in _subscribers)
        {
            subscriber.Update(message); // Notify each subscriber
        }
    }

    // ğŸ“Œ Simulate uploading a new video to the channel
    public void UploadVideo(string title)
    {
        Console.WriteLine($"\nğŸ¥ New video uploaded: {title}");
        Notify($"ğŸ“¢ New Video Alert: {title}"); // Notify all subscribers about the new video
    }
}

#endregion

#region Subscriber Implementation

// ğŸ“Œ ConcreteSubscriber: Person
// ğŸ”· Implements ISubscriber to react when notified by the publisher (YouTube).
public class Person : ISubscriber
{
    private string _name;

    // ğŸ“Œ Constructor to assign the subscriber's name
    public Person(string name)
    {
        _name = name;
    }

    // ğŸ“Œ Update method to handle notifications
    // ğŸ”· When notified by the publisher, this method is triggered to process the message.
    public void Update(string message)
    {
        Console.WriteLine($"{_name} received notification: {message}");
    }
}

#endregion

#region Client Code

// ğŸ“Œ Main Program
// ğŸ”· Demonstrates how the Publisher-Subscriber relationship works with YouTube as the publisher and Person as the subscribers.
class Program
{
    static void Main()
    {
        // ğŸ“Œ Step 1: Create a YouTube channel (Publisher)
        YouTube channel = new YouTube();

        // ğŸ“Œ Step 2: Create Persons (Subscribers)
        ISubscriber person1 = new Person("Alice");
        ISubscriber person2 = new Person("Bob");
        ISubscriber person3 = new Person("Charlie");

        // ğŸ“Œ Step 3: Subscribe Persons to the YouTube channel
        channel.Subscribe(person1);  // Alice subscribes
        channel.Subscribe(person2);  // Bob subscribes
        channel.Subscribe(person3);  // Charlie subscribes

        // ğŸ“Œ Step 4: Upload a new video (This triggers notifications to all subscribers)
        channel.UploadVideo("Observer Pattern Explained");

        // ğŸ“Œ Step 5: Unsubscribe a Person (Bob unsubscribes)
        channel.Unsubscribe(person2);

        // ğŸ“Œ Step 6: Upload another video (Only Alice and Charlie will be notified)
        channel.UploadVideo("Strategy Pattern Tutorial");

        // Output will show which subscribers received the notifications
    }
}

#endregion

âœ… Explanation of the Updated Code:
IPublisher Interface:
Defines methods for the publisher to manage subscribers:
Subscribe() to add a subscriber.
Unsubscribe() to remove a subscriber.
Notify() to notify all subscribed users.

ISubscriber Interface:
Defines the Update() method that all subscribers must implement to receive updates from the publisher.

ConcretePublisher: YouTube:
Implements IPublisher and manages the list of subscribers. When a new video is uploaded, it notifies all subscribers.
The UploadVideo() method triggers the Notify() method, sending notifications to the subscribers.

ConcreteSubscriber: Person:
Implements ISubscriber. Each Person subscribes to the YouTube channel and handles notifications through the Update() method.

Client Code:
In the Main() method, we create a YouTube channel (publisher) and Person objects (subscribers).
The subscribers are added to the channel, and when a new video is uploaded, all subscribers receive a notification.
One subscriber (Bob) is unsubscribed before uploading another video, and only the remaining subscribers receive the second notification.

âœ… Summary of Changes:
IPublisher and ISubscriber interfaces now reflect the Publisher-Subscriber pattern.
Concrete classes are renamed to YouTube (publisher) and Person (subscriber) to better align with the publisher-subscriber analogy.


âœ… Publisher-Subscriber Relation in the Code:
Publisher (Subject):
The YouTubeChannel class is the publisher. It publishes updates (like new video uploads) to all its subscribers (observers) whenever an event occurs (video is uploaded).

Subscribers (Observers):
The Subscriber class acts as the subscriber (or observer). It subscribes to the YouTubeChannel and gets notified whenever the channel (publisher) uploads a new video. Each subscriber reacts to the update by performing the Update() method.

How the Publisher-Subscriber Relation Works:
Publisher (Subject):

The YouTubeChannel is the publisher in the publisher-subscriber relationship. It has a list of subscribers (observers).
When the publisher (YouTubeChannel) changes its state (for example, when it uploads a video), it notifies all its registered subscribers about this change.

Subscribers (Observers):
The Subscriber class is the subscriber. Each subscriber registers (subscribes) to the publisher (YouTubeChannel) and receives notifications about changes from the publisher.

The subscriber reacts to the notification by executing the Update() method.

Example Analogy:
Think of the YouTubeChannel as a publisher (like a news channel), and the Subscribers are people who subscribe to that news channel.

Whenever the news channel (publisher) has a new broadcast (like uploading a new video), all the subscribers who are subscribed to the channel will receive the update.

-------------------------------------CODE EG OWN---------------------------------------------
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.InteropServices;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApp6
{
    // âœ… PUBLISHER INTERFACE
    // This interface defines the contract for the publisher (subject),
    // allowing subscribers to subscribe, unsubscribe, and be notified.
    public interface IPublisher
    {
        void Subscriber(ISubscriber obj);     // Method to add a subscriber
        void UnSubscribe(ISubscriber obj);    // Method to remove a subscriber
        void Notify(string msg);              // Method to notify all subscribers
    }

    // âœ… PUBLISHER CONCRETE CLASS
    // 'YouTube' is the concrete implementation of the IPublisher interface.
    // It maintains a list of subscribers and notifies them when a video is uploaded.
    public class YouTube : IPublisher
    {
        // List to keep track of all subscribers
        private List<ISubscriber> s = new List<ISubscriber>();

        // Adds a new subscriber to the list
        public void Subscriber(ISubscriber obj)
        {
            Console.WriteLine("âœ… A new subscriber has been added.");
            s.Add(obj);
        }

        // Removes an existing subscriber from the list
        public void UnSubscribe(ISubscriber obj)
        {
            Console.WriteLine("âŒ A subscriber has been removed.");
            s.Remove(obj);
        }

        // Notifies all subscribers with a message
        public void Notify(string msg)
        {
            foreach (var i in s)
            {
                i.SendNoti(msg);  // Calls the subscriber's notification handler
            }
        }

        // Method to simulate video upload and notify all subscribers
        public void UploadVideo(string title)
        {
            Console.WriteLine($"ğŸ¬ New video uploaded: {title}");
            Notify($"ğŸ“¢ New Video Alert: {title}");  // Notify all subscribers
        }
    }

    // âœ… SUBSCRIBER INTERFACE
    // This interface defines the contract for subscribers
    // All subscribers must implement this method to receive updates
    public interface ISubscriber
    {
        void SendNoti(string message); // Method to handle incoming notifications
    }

    // âœ… CONCRETE SUBSCRIBER CLASS
    // 'Person' class implements ISubscriber and defines how the subscriber reacts to notifications
    public class Person : ISubscriber
    {
        public string Name { get; set; }

        public Person(string name)
        {
            Name = name;
        }

        // Method that gets called when the publisher sends a notification
        public void SendNoti(string msg)
        {
            Console.WriteLine($"ğŸ“¨ Notification to {Name}: {msg}");
        }
    }

    // âœ… MAIN PROGRAM TO DEMONSTRATE THE OBSERVER PATTERN
    internal class Program
    {
        static void Main(string[] args)
        {
            // Create a publisher object (YouTube channel)
            YouTube Ch1 = new YouTube();

            // Create subscriber objects (People)
            ISubscriber p1 = new Person("Bob");
            ISubscriber p2 = new Person("Vishu");
            ISubscriber p3 = new Person("Ishita");

            // Subscribe all persons to the channel
            Ch1.Subscriber(p1);
            Ch1.Subscriber(p2);
            Ch1.Subscriber(p3);

            // Publisher uploads a video, all subscribers are notified
            Ch1.UploadVideo("DDLJ UPLOADED");

            // Remove one subscriber
            Ch1.UnSubscribe(p1);

            // Upload another video, only remaining subscribers are notified
            Ch1.UploadVideo("SHOLAY UPLOADED");
        }
    }
}


âœ… Explanation in Simple Points
ğŸ“Œ What Is This Code About?
ğŸ”· This program simulates a YouTube channel (Publisher) and Users (Subscribers).
ğŸ”· Whenever a new video is uploaded, all subscribers are notified automatically.

ğŸ“Œ How Observer Pattern is Implemented:
ğŸ”· 1. Define Interfaces
IPublisher: has methods to manage subscribers and send notifications.

ISubscriber: has a method to receive a notification.

ğŸ”· 2. Create Publisher Class (YouTube)
Holds a list of subscribers.

Implements methods to Subscribe, UnSubscribe, and Notify.

ğŸ”· 3. Create Subscriber Class (Person)
Implements ISubscriber.

Has a SendNoti method to receive and display the notification.

ğŸ”· 4. Connect in Main()
Create a YouTube channel.

Add multiple people as subscribers.

Simulate video uploads, triggering notifications.

Remove a subscriber and upload again to see that only remaining ones are notified.

ğŸ“Œ Where is the Publisher-Subscriber Relationship?
ğŸ”· YouTube â†’ Publisher (Subject)
ğŸ”· Person â†’ Subscriber (Observer)
ğŸ”· Ch1.Subscriber(p1) â†’ Bob subscribes to the channel (link created)
ğŸ”· UploadVideo(...) â†’ YouTube notifies all linked subscribers

