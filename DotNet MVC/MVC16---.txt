MVC16---
-ğŸ“Œâœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…ğŸ“ŒCH :05 MODLESğŸ“Œâœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…ğŸ“Œ: FOR CH NAME (Green Col Pen for ch Name)
- : FOR HASHTAG POINTS (HashTag)
-ğŸ“Œ: FOR POINTS (Black pens)
-ğŸ”„: for eg
-ğŸ—‚: for files and folders
-ğŸ‘‡ Code:
-ğŸ“¦ : Keywords definition
-ğŸ“ŒğŸ“ŒNOTEğŸ“ŒğŸ“Œ : for imp note

-FOR NEW HASHTAG (âœ…[#1])
--------âœ…[#2]. AddControllers() method----


------------------------------------
========CH CLOSEING SYMBOL==========
------------------------------------


ğŸ“Œâœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…ğŸ“ŒCH : SECURITYğŸ“Œâœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…ğŸ“Œ

âœ…[#1]SECURITY

ğŸ“ŒSECURITY IN MVC 
What is Security in MVC?
In an MVC (Model-View-Controller) application, security refers to practices and techniques used to protect the app, data, and users from unauthorized access, attacks, or data leakage.

Common Security Threats in MVC
-Before learning how to secure your MVC app, understand what you're protecting against:
| Threat                                | Description                                                   |
| ------------------------------------- | ------------------------------------------------------------- |
| **XSS (Cross-site Scripting)**        | Malicious scripts injected into views                         |
| **CSRF (Cross-site Request Forgery)** | Tricks users into making unwanted requests                    |
| **SQL Injection**                     | Malicious SQL commands to extract or manipulate database data |
| **Authentication Bypass**             | Users gain unauthorized access                                |
| **Sensitive Data Exposure**           | Leaking passwords, tokens, or personal data                   |
| **Clickjacking**                      | Hiding malicious links inside iframes                         |

âœ…[#2] Security Best Practices in ASP.NET Core MVC

ğŸ“Œ1. ğŸ” Authentication & Authorizatio
âœ” Use ASP.NET Core Identity
Handles user registration, login, password management, roles, and more.
Secure and extensible out of the box.
âœ” Role-based Authorization
ğŸ‘‡ Code:
[Authorize(Roles = "Admin")]
public IActionResult AdminOnly() => View();

âœ” Policy-based Authorization
services.AddAuthorization(options =>
{
    options.AddPolicy("Over18", policy => policy.RequireClaim("Age", "18"));
});


ğŸ“Œ2. ğŸ§¼ Input Validation & Model Binding
âœ” Use Model Validation Attributes
ğŸ‘‡ Code:
public class RegisterViewModel {
    [Required]
    [EmailAddress]
    public string Email { get; set; }

    [Required]
    [StringLength(100, MinimumLength = 6)]
    public string Password { get; set; }
}

âœ” Use Anti-Forgery Tokens
Protects against CSRF attacks:
ğŸ‘‡ Code:
<form asp-action="PostComment" method="post">
    @Html.AntiForgeryToken()
    ...
</form>

In Controller:
ğŸ‘‡ Code:
[ValidateAntiForgeryToken]
public IActionResult PostComment(CommentModel model) { ... }

ğŸ“Œ3. ğŸ’£ Prevent SQL Injection
âŒ Bad:
ğŸ‘‡ Code:
var query = $"SELECT * FROM Users WHERE Username = '{username}'";
-Don't use this code, instead use the below one
-Use Entity Framework (EF) Core or parameterized queries.
var user = context.Users.FirstOrDefault(u => u.Username == username);

ğŸ“Œ4. ğŸ§ª Prevent Cross-Site Scripting (XSS)
âœ” Automatically Escape Output
ASP.NET Core MVC auto-encodes content in Razor:
ğŸ‘‡ Code:
<!-- This is safe -->
<p>@Model.UserName</p>

-âŒ Dangerous: Using @Html.Raw() exposes you to XSS
Only use it when you're absolutely sure content is safe.

ğŸ“Œ5. ğŸ§· Use HTTPS (SSL)
âœ” Redirect HTTP to HTTPS
In Startup.cs: app.UseHttpsRedirection();
-Enforce HTTPS in production:
[RequireHttps]
public class SecureController : Controller { ... }

ğŸ“Œ6. ğŸ”‘ Secure Cookies
âœ” Configure Cookie Authentication
ğŸ‘‡ Code:
services.Configure<CookiePolicyOptions>(options =>
{
    options.Secure = CookieSecurePolicy.Always;
});

âœ” Enable SameSite Attribute
Protects against CSRF:
services.ConfigureApplicationCookie(options =>
{
    options.Cookie.SameSite = SameSiteMode.Strict;
});


ğŸ“Œâœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…ğŸ“ŒCH : FILTERSğŸ“Œâœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…ğŸ“Œ

âœ…[#1] FILTERS
 
ğŸ“Œ What are Filters in MVC?
Filters in ASP.NET Core MVC are code components that let you run custom logic before or after specific stages in the request-processing pipeline(that is noth but the confugrations of the MIDDLEWERES). Think of them like â€œhooksâ€ into your controller actions where you can:
Run logic before/after an action executes.
Handle errors.
Modify the result returned.
Authorize access.

ğŸ§  Real-Life Analogy:
Imagine a restaurant kitchen:
Authorization filter checks if youâ€™re allowed to enter (are you an employee?).
Action filter sets up the workspace (chopping veggies before cooking).
Result filter manages presentation (plating food before serving).
Exception filter handles problems (like fire alarms).

ğŸ§± Types of Filters in MVC
| Filter Type              | When It Runs                                      | Purpose                      |
| ------------------------ | ------------------------------------------------- | ---------------------------- |
| **Authorization Filter** | Before anything else                              | Check if user is authorized  |
| **Resource Filter**      | Before and after rest of the pipeline             | Cache, performance tweaks    |
| **Action Filter**        | Before and after the action method                | Modify parameters or results |
| **Result Filter**        | Before and after action result (View, JSON, etc.) | Modify the result            |
| **Exception Filter**     | If an unhandled exception occurs                  | Centralized error handling   |


âœ…[#2] EXAMPLE OF FILTER USECASE

ğŸ“Œ How to Use Filters in ASP.NET Core MVC

You can use filters in three ways:

1. ğŸ”¹ Attributes (Declarative Filters) â€“ Applied to controllers or actions
[Authorize]
public class AdminController : Controller
{
    [HttpGet]
    public IActionResult Dashboard() => View();
}

2. ğŸ”¸ Globally (Configure in Startup/Program.cs)
services.AddControllersWithViews(options =>
{
    options.Filters.Add(new AuthorizeFilter());
});

3. ğŸ”§ Programmatically (Filter Factories) â€“ Advanced scenario
ğŸ§© Built-in Filters
 
EG : Authorization Filters
Example: [Authorize], [AllowAnonymous]
Purpose: Check if user has access
ğŸ‘‡ Code:
[Authorize(Roles = "Admin")]
public IActionResult Settings() => View();

-You can aslo create custom Filters.

ğŸ“Œâœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…ğŸ“ŒCH : BUNDLNG AND MNIFICATIONğŸ“Œâœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…ğŸ“Œ

âœ…[#1] BUNDLING AND MINIFICATION

ğŸ“ŒWhat is Bundling and Minification?
Bundling and Minification are performance optimization techniques used in web applications to make pages load faster.

ğŸ”¹ Bundling:
Combines multiple CSS or JavaScript files into one single file.
ğŸ”¸ Reduces the number of HTTP requests.
ğŸ”¹ Minification:
Removes unnecessary characters from CSS/JS files (like spaces, comments, newlines) to reduce file size.
ğŸ”¸ Makes the file smaller and faster to download.

Why is it Important?
Every time a browser loads a webpage, it sends HTTP requests for CSS, JS, images, etc. So if uh have too many files = more requests = slower loading.

Example (Without bundling):
ğŸ‘‡ Code:
<link href="/css/bootstrap.css" rel="stylesheet" />
<link href="/css/site.css" rel="stylesheet" />
<script src="/js/jquery.js"></script>
<script src="/js/site.js"></script>
//Thatâ€™s 4 HTTP requests.

Example (With bundling):
ğŸ‘‡ Code:
<link href="/Content/css?v=abc123" rel="stylesheet" />
<script src="/bundles/js?v=xyz456"></script>
//Now it's 2 requests instead of 4. 

âœ…[#2] HOW IT WORKS

ğŸ“ŒEXAMPLE APPLCATION 
ğŸ—‚MyMvcApp/
â”‚
â”œâ”€â”€ Content/
â”‚   â”œâ”€â”€ bootstrap.css
â”‚   â””â”€â”€ site.css
â”‚
â”œâ”€â”€ Scripts/
â”‚   â”œâ”€â”€ jquery.js
â”‚   â””â”€â”€ site.js
â”‚
â”œâ”€â”€ App_Start/
â”‚   â””â”€â”€ BundleConfig.cs
â”‚
â”œâ”€â”€ Views/
â”‚   â””â”€â”€ Shared/
â”‚       â””â”€â”€ _Layout.cshtml
â”‚
â”œâ”€â”€ Global.asax
â””â”€â”€ Web.config

ğŸ§¾ 1. Create the Bundle Configuration
ğŸ—‚Create App_Start/BundleConfig.cs:
ğŸ‘‡ Code:
// Import the necessary namespace for bundling and minification
using System.Web.Optimization;

// Define a public class responsible for configuring bundles in the application
public class BundleConfig
{
    // This static method is called from Global.asax or Startup.cs during application startup
    // It registers all CSS and JS bundles used by the app
    public static void RegisterBundles(BundleCollection bundles)
    {
        // -----------------------------------------------
        // Create a new CSS bundle
        // StyleBundle is a class from System.Web.Optimization
        // The virtual path "~/Content/css" is used in your Razor views (e.g., @Styles.Render)
        // Include() method takes a list of physical CSS file paths to combine into one bundle
        // -----------------------------------------------
        bundles.Add(new StyleBundle("~/Content/css").Include(
                  "~/Content/bootstrap.css",   // Bootstrap CSS file
                  "~/Content/site.css"));      // Custom site-specific styles

        // -----------------------------------------------
        // Create a new JavaScript bundle
        // ScriptBundle is another class from System.Web.Optimization
        // The virtual path "~/bundles/js" is referenced in Razor views (e.g., @Scripts.Render)
        // Include() method takes a list of JS files to combine and optionally minify
        // -----------------------------------------------
        bundles.Add(new ScriptBundle("~/bundles/js").Include(
                  "~/Scripts/jquery.js",      // jQuery JavaScript library
                  "~/Scripts/site.js"));      // Custom JavaScript for the site

        // -----------------------------------------------
        // Enable bundling and minification even in debug mode
        // By default, optimization is only enabled in Release mode
        // Setting EnableOptimizations = true forces it on in all environments
        // This helps test performance optimizations in development too
        // -----------------------------------------------
        BundleTable.EnableOptimizations = true;
    }
}


ğŸ§¾ 2. Register Bundles in Global.asax
ğŸ—‚In Global.asax.cs, add this inside Application_Start():
ğŸ‘‡ Code:
// This is the Global.asax.cs file in a traditional ASP.NET MVC (non-Core) application
// It defines the application lifecycle events such as Application_Start, Application_End, etc.

using System.Web.Mvc;        // Provides MVC-related classes like AreaRegistration
using System.Web.Optimization; // Provides bundling and minification support
using System.Web.Routing;    // Provides routing-related classes like RouteTable

namespace YourProjectNamespace
{
    public class MvcApplication : System.Web.HttpApplication
    {
        // This method is automatically called when the ASP.NET application starts
        protected void Application_Start()
        {
            // --------------------------------------------------------------
            // 1ï¸âƒ£ Register all MVC Areas (used to group related controllers/views)
            // --------------------------------------------------------------
            // AreaRegistration.RegisterAllAreas() comes from System.Web.Mvc.AreaRegistration
            // It scans the application for all defined Areas and registers their routes
            // Areas help modularize large applications into smaller sections
            AreaRegistration.RegisterAllAreas();

            // --------------------------------------------------------------
            // 2ï¸âƒ£ Register custom application routes (URL patterns to controllers/actions)
            // --------------------------------------------------------------
            // RouteConfig.RegisterRoutes is a custom method you define in App_Start\RouteConfig.cs
            // RouteTable.Routes is a global static collection of all route mappings in the app
            // This sets up convention-based routing, like "{controller}/{action}/{id}"
            RouteConfig.RegisterRoutes(RouteTable.Routes);

            // --------------------------------------------------------------
            // 3ï¸âƒ£ Register bundles for scripts and styles (JavaScript, CSS)
            // --------------------------------------------------------------
            // BundleConfig.RegisterBundles is a custom method in App_Start\BundleConfig.cs
            // BundleTable.Bundles is a global static collection of bundles
            // This improves performance by combining and minifying JS/CSS files
            BundleConfig.RegisterBundles(BundleTable.Bundles);
        }
    }
}

ğŸ§¾ 3. Use the Bundles in Layout.cshtml
ğŸ—‚Open Views/Shared/_Layout.cshtml and include:
ğŸ‘‡ Code:
@* 
    This is a Razor layout file typically named _Layout.cshtml 
    It defines a common HTML structure for multiple views 
    and includes sections for dynamic content insertion.
*@

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />  @* Sets the character encoding to UTF-8 *@

    @* 
        Razor expression to insert the value of ViewBag.Title dynamically.
        ViewBag is a dynamic object provided by the ControllerBase class (System.Web.Mvc).
        You can set ViewBag.Title = "My Page Title" in your controller or view.
    *@
    <title>@ViewBag.Title</title>

    @*
        Styles.Render is a Razor helper method provided by the System.Web.Optimization namespace.
        It renders one or more CSS files that were previously registered in BundleConfig.cs.
        "~/Content/css" is a virtual path representing a bundle of CSS files.
        The bundled CSS files will be minified and merged into one link tag.
    *@
    @Styles.Render("~/Content/css")
</head>
<body>
    @*
        RenderBody is a placeholder where the content of the view associated with this layout will be injected.
        Every Razor view that uses this layout will have its content placed here.
        This is required in all layout pages.
    *@
    @RenderBody()

    @*
        Scripts.Render is similar to Styles.Render, but for JavaScript bundles.
        "~/bundles/js" refers to a bundle of JavaScript files defined in BundleConfig.cs.
        It outputs <script src="..."></script> tags for optimized JS files.
    *@
    @Scripts.Render("~/bundles/js")
</body>
</html>

ğŸ§ª Output in Browser (Release Mode or Optimizations Enabled)
<link href="/Content/css?v=abc123" rel="stylesheet" />
<script src="/bundles/js?v=xyz456"></script>


ğŸ” Enable or Disable Optimization
In Debug mode: OFF by default.
In Release mode: ON by default.
To override manually (e.g., while testing in Debug mode): BundleTable.EnableOptimizations = true; // Forces bundling & minification


âš¡ Real Benefits
| Optimization | Effect                                              |
| ------------ | --------------------------------------------------- |
| Bundling     | Reduces requests                                    |
| Minification | Reduces file size                                   |
| Combined     | Faster page load, better SEO, lower bandwidth usage |
