MVC13---
-ğŸ“Œâœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…ğŸ“ŒCH :05 MODLESğŸ“Œâœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…ğŸ“Œ: FOR CH NAME (Green Col Pen for ch Name)
- : FOR HASHTAG POINTS (HashTag)
-ğŸ“Œ: FOR POINTS (Black pens)
-ğŸ”„: for eg
-ğŸ—‚: for files and folders
-ğŸ‘‡ Code:
-ğŸ“¦ : Keywords definition
-ğŸ“ŒğŸ“ŒNOTEğŸ“ŒğŸ“Œ : for imp note

-FOR NEW HASHTAG (âœ…[#1])
--------âœ…[#2]. AddControllers() method----


------------------------------------
========CH CLOSEING SYMBOL==========
------------------------------------


ğŸ“Œâœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…ğŸ“ŒCH : ENTITY FRAMWORKğŸ“Œâœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…ğŸ“Œ

âœ…[#1] ENTITY FRAMEWORK

ğŸ“ŒWhat is Entity Framework?
Entity Framework (EF) is a framework for data access in .NET. It sits between your C# application and your relational database (like SQL Server, MySQL, PostgreSQL) and lets you query, insert, update, and delete data using .NET classes instead of SQL queries.

ğŸ”§ Key Features of Entity Framework
| Feature                        | Description                                             |
| ------------------------------ | ------------------------------------------------------- |
| ORM (Object Relational Mapper) | Maps .NET classes to database tables                    |
| LINQ Support                   | Enables writing queries in C# using LINQ                |
| Change Tracking                | Tracks changes to objects automatically                 |
| Migrations                     | Keeps your database schema in sync with your models     |
| Lazy/Eager/Explicit Loading    | Controls how related data is loaded                     |
| Cross-Database Support         | Works with various RDBMS (SQL Server, PostgreSQL, etc.) |


ğŸ—ï¸ EF Architecture Overview
Application Layer
     â†“
Entity Framework (ORM)
     â†“
ADO.NET Provider
     â†“
Database (SQL Server, etc.)


ğŸ“Œ EF in ASP.NET MVC â€“ How it Works
1. Model
You create C# classes that represent your entities (tables).
ğŸ‘‡ Code
public class Student
{
    public int StudentId { get; set; }
    public string Name { get; set; }
}

2. DbContext
You create a class that inherits from DbContext. This class is used to manage entity objects during runtime, including populating objects with data from a database, change tracking, and persisting data to the database.
ğŸ‘‡ Code
public class SchoolContext : DbContext
{
    public DbSet<Student> Students { get; set; }
}

3. Migration (for Code-First)
You use the EF CLI or Package Manager Console to create/update the database schema based on your models.
ğŸ‘‡ Code
Add-Migration InitialCreate
Update-Database


4. Use EF in Controllers
You inject or create a DbContext instance and perform operations.
ğŸ‘‡ Code
public class StudentController : Controller
{
    private SchoolContext db = new SchoolContext();

    public ActionResult Index()
    {
        var students = db.Students.ToList();
        return View(students);
    }
}


âœ…[#2] EF Development Approaches

ğŸ“Œ3 TYPES OF APPROCHES

1. Code-First
You write the C# classes first.
EF generates the database from your models.
You manage schema changes with migrations.

2. Database-First
You start with an existing database.
EF generates C# classes and DbContext using scaffolding.

3. Model-First (rarely used now)
You design the model using a visual designer in .edmx format.
EF generates the database and classes.

ğŸ“ŒImportant EF Classes & Concepts
| Concept          | Description                                                        |
| ---------------- | ------------------------------------------------------------------ |
| `DbContext`      | The main class for interacting with the database.                  |
| `DbSet<TEntity>` | Represents a table in the database.                                |
| `EntityState`    | Used to track object states: Added, Modified, Deleted, Unchanged.  |
| `ModelBuilder`   | Used in `OnModelCreating` for configuring models using Fluent API. |
| `Migration`      | Used to create, update, and manage database schema versions.       |


ğŸ§  Loading Strategies in EF
| Type                 | Description                                                                 |
| -------------------- | --------------------------------------------------------------------------- |
| **Eager Loading**    | Loads related data with the main query using `.Include()`                   |
| **Lazy Loading**     | Loads related data only when accessed (needs virtual navigation properties) |
| **Explicit Loading** | Loads data manually using `.Entry().Collection().Load()`                    |


ğŸ“ŒEF Configuration in ASP.NET MVC

ğŸ“‚ Folder Structure in an ASP.NET MVC Project Using EF
Models/
  - Student.cs
  - SchoolContext.cs

Controllers/
  - StudentController.cs

Views/
  - Student/
    - Index.cshtml
    - Create.cshtml
    - Edit.cshtml

Migrations/
  - [timestamp]_InitialCreate.cs


In Web.config or appsettings.json:
ğŸ‘‡ Code
<connectionStrings>
  <add name="SchoolContext" connectionString="Data Source=.;Initial Catalog=SchoolDB;Integrated Security=True;" providerName="System.Data.SqlClient"/>
</connectionStrings>

		//OR//

ğŸ‘‡ Code
"ConnectionStrings": {
  "SchoolContext": "Server=.;Database=SchoolDB;Trusted_Connection=True;"
}
Then configure in DbContext:
public SchoolContext() : base("name=SchoolContext")
{
}

ğŸ“Œ Example CRUD Operations with EF
Create
ğŸ‘‡ Code
Student s = new Student { Name = "Ali" };
context.Students.Add(s);
context.SaveChanges();

Read
ğŸ‘‡ Code
var list = context.Students.ToList();

Update
ğŸ‘‡ Code
var student = context.Students.Find(1);
student.Name = "Updated Name";
context.SaveChanges();

Delete
ğŸ‘‡ Code
var student = context.Students.Find(1);
context.Students.Remove(student);
context.SaveChanges();



âœ…[#3] EF COD FIRT APPROACH

ğŸ“ŒCode First :
When to use:
When you want to start with your C# classes.
Ideal for new projects where the database doesn't exist yet.

ğŸ“Œ Step-by-Step: Code-First Example:
We want to create a Student table with Id, Name, and Age.

Step 1: Create ASP.NET MVC Application
Open Visual Studio
File â†’ New â†’ Project â†’ ASP.NET Web Application â†’ MVC
Name: StudentManagementCodeFirst

Step 2: Install Entity Framework via NuGet
ğŸ‘‡ Code
Install-Package EntityFramework

Step 3: Create Model Class
Models/Student.cs
ğŸ‘‡ Code
public class Student
{
    public int StudentId { get; set; }
    public string Name { get; set; }
    public int Age { get; set; }
}

Step 4: Create DbContext
Models/SchoolContext.cs
ğŸ‘‡ Code
using System.Data.Entity;

public class SchoolContext : DbContext
{
    public DbSet<Student> Students { get; set; }
}

Step 5: Configure Connection String
In Web.config:
ğŸ‘‡ Code
<connectionStrings>
  <add name="SchoolContext" connectionString="Data Source=.;Initial Catalog=SchoolDB;Integrated Security=True;" providerName="System.Data.SqlClient"/>
</connectionStrings>

Step 6: Enable Migrations
ğŸ‘‡ Code
Enable-Migrations
Add-Migration InitialCreate
Update-Database
//EF creates the SchoolDB database and Students table.

Step 7: Use in Controller
Controllers/StudentController.cs
ğŸ‘‡ Code
public class StudentController : Controller
{
    private SchoolContext db = new SchoolContext();

    public ActionResult Index()
    {
        return View(db.Students.ToList());
    }
}

Code-First Summary:
Write classes â†’ EF creates DB
Schema updates = Migrations
You control the model

âœ…[#4] EF DATABASE-FIRST APPROACH

ğŸ“ŒWhen to use:
When you already have a database and want to generate models.

ğŸ“Œ Step-by-Step: Database-First Example
ğŸ‘¨â€ğŸ« Use Case:
Use existing StudentDB database with a table Student (Id, Name, Age).

Step 1: Create ASP.NET MVC Application
Name: StudentManagementDBFirst

Step 2: Create SQL Server Database Manually
Run SQL:
ğŸ‘‡ Code
CREATE DATABASE StudentDB;
GO

USE StudentDB;

CREATE TABLE Student (
    StudentId INT PRIMARY KEY IDENTITY,
    Name NVARCHAR(100),
    Age INT
);

Step 3: Add ADO.NET Entity Data Model
Right-click Models â†’ Add â†’ New Item
Select "ADO.NET Entity Data Model" â†’ Name: StudentModel.edmx
Choose "EF Designer from database"
Connect to StudentDB
Choose Student table
Finish

This generates:
StudentModel.edmx
Student.cs
StudentDBEntities (DbContext class)

 Step 4: Use in Controller
ğŸ‘‡ Code
StudentDBEntities db = new StudentDBEntities();

public ActionResult Index()
{
    return View(db.Students.ToList());
}

 Database-First Summary:
Start from DB â†’ EF generates models
Changes in DB â†’ You must update .edmx

âœ…[#5] EF MODEL-FIRST APPROACHWhen to use:

ğŸ“ŒWhen you prefer graphical model design.
Less popular, legacy projects mostly.

ğŸ“ŒStep-by-Step: Model-First Example
ğŸ‘¨â€ğŸ« Use Case:
Create model visually, then let EF generate database.

Step 1: Create ASP.NET MVC Application
Name: StudentManagementModelFirst


Step 2: Add ADO.NET Entity Data Model
Right-click Models â†’ Add â†’ New Item
Select ADO.NET Entity Data Model â†’ Name: StudentModel.edmx
Choose "Empty EF Designer Model"

Step 3: Design the Model
In the .edmx designer, right-click â†’ Add New â†’ Entity
Name: Student
Add Properties:
StudentId (Key, Int32)
Name (String)
Age (Int32)

Step 4: Generate Database
Right-click on Designer â†’ Generate Database from Model
Save .sql file and run it in SQL Server to create the database

Step 5: Use Generated Context and Entity
ğŸ‘‡ Code
StudentModelContainer db = new StudentModelContainer();

public ActionResult Index()
{
    return View(db.Students.ToList());
}


ğŸ“ŒModel-First Summary:
Design model visually
EF generates DB schema and classes
Less used in modern development

Comparison Table